<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BizMan Revision Arcade – Unit 3 AOS2</title>
  <style>
    /* ===== Neon Night theme ===== */
    :root {
      --bg: #0a0b14;
      --bg-2: #0f1224;
      --ink: #e6e6ef;
      --muted: #9aa1b4;
      --accent: #7c3aed;
      --accent-2: #22d3ee;
      --good: #22c55e;
      --warn: #fbbf24;
      --bad: #ef4444;
      --grid-size: 12;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
      color: var(--ink);
      background:
        radial-gradient(600px 600px at 20% -10%, rgba(124,58,237,.25), transparent 60%),
        radial-gradient(600px 600px at 100% 0%, rgba(34,211,238,.15), transparent 60%),
        linear-gradient(180deg, #0a0b14, #06070f 60%);
      display: flex;
      flex-direction: column;
    }
    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px clamp(24px, 5vw, 60px);
      background: rgba(10,11,20,.55);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(255,255,255,.04);
    }
    .brand {
      font-weight: 900;
      letter-spacing: .5px;
      font-size: clamp(22px, 3.6vw, 32px);
      cursor: pointer;
    }
    .brand .dot { color: var(--accent-2); }
    .chip {
      border: 1px solid rgba(255,255,255,.08);
      color: var(--muted);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 13px;
    }
    #app { flex: 1; display: flex; flex-direction: column; width: 100%; }
    .view { display: none; flex: 1; padding: 32px clamp(24px, 6vw, 72px); }
    .view.active { display: flex; }
    .view-content { display: flex; flex-direction: column; gap: 20px; width: 100%; }
    .view-content.two-column {
      display: grid;
      grid-template-columns: minmax(0, 2.25fr) minmax(260px, 1fr);
      gap: 22px;
      align-items: flex-start;
    }
    .panel {
      background: linear-gradient(180deg, rgba(124,58,237,.12), rgba(34,211,238,.08));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px;
      box-shadow: 0 20px 45px rgba(0,0,0,.35);
      padding: 26px;
      width: 100%;
    }
    .card { background: var(--bg-2); }
    .controls label {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0;
      color: var(--muted);
    }
    .topic-list {
      display: grid;
      gap: 18px;
    }
    .topic-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .topic-heading {
      font-weight: 700;
      color: #fff;
      margin-bottom: 4px;
      font-size: 15px;
    }
    .btn {
      cursor: pointer;
      border: 0;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: 800;
      letter-spacing: .2px;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .btn:active { transform: translateY(1px); }
    .btn.primary {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #071013;
    }
    .btn.secondary {
      background: #11142a;
      color: #e5e7eb;
      border: 1px solid rgba(255,255,255,.12);
    }
    .btn.ghost {
      background: transparent;
      color: var(--muted);
      border: 1px dashed rgba(255,255,255,.18);
    }
    .btn.small { padding: 8px 10px; border-radius: 12px; font-weight: 700; }
    .tag {
      display: inline-block;
      padding: 4px 10px;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      color: var(--muted);
      font-size: 12px;
      margin: 2px;
    }
    .question { font-size: 24px; font-weight: 900; line-height: 1.3; color: #fff; margin-top: 12px; }
    .answers { display: grid; gap: 10px; margin-top: 18px; }
    .answer {
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.03);
      cursor: pointer;
      color: var(--ink);
      text-align: left;
    }
    .answer:hover { border-color: rgba(255,255,255,.22); }
    .answer.correct { outline: 2px solid var(--good); background: rgba(34,197,94,.1); color: var(--good); }
    .answer.wrong { outline: 2px solid var(--bad); background: rgba(239,68,68,.08); color: var(--bad); }
    .explain {
      margin-top: 18px;
      color: #d7def0;
      background: #0b1030;
      border: 1px solid rgba(255,255,255,.08);
      padding: 12px;
      border-radius: 12px;
    }
    .subtitle { color: var(--muted); font-size: 14px; }
    .hidden { display: none !important; }
    input[type="number"],
    select,
    input[type="text"] {
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.1);
      background: #0b1030;
      color: var(--ink);
      padding: 10px;
    }
    .toast {
      position: fixed;
      right: 16px;
      bottom: 16px;
      background: #0b1030;
      border: 1px solid rgba(255,255,255,.1);
      padding: 10px 12px;
      border-radius: 12px;
      color: var(--ink);
      display: none;
      z-index: 40;
    }
    .actions { display: flex; gap: 10px; margin-top: 22px; flex-wrap: wrap; }
    .sidebar-slot { display: flex; flex-direction: column; gap: 20px; }
    .hud { display: none; }
    .hud.active { display: block; }
    .stats { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; color: var(--muted); }
    .stat {
      padding: 8px 12px;
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 10px;
      background: #0e1226;
    }
    .study-panel { max-width: 1200px; margin: 0 auto; gap: 12px; }
    .study-panel .panel-card {
      background: rgba(255,255,255,.03);
      margin: 10px 0;
      padding: 16px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.06);
    }
    .meter {
      height: 16px;
      border-radius: 999px;
      background: #0b1030;
      border: 1px solid rgba(255,255,255,.1);
      overflow: hidden;
    }
    .meter > .fill { height: 100%; width: 0%; }
    .row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .court {
      position: relative;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      height: 160px;
      background:
        radial-gradient(650px 150px at 60% 0%, rgba(124,58,237,.22), transparent 60%),
        linear-gradient(180deg, #0b1030, #0a0f28);
      overflow: hidden;
    }
    .backboard { position: absolute; right: 12px; top: 30px; width: 6px; height: 40px; background: #e5e7eb; }
    .hoop { position: absolute; right: 18px; top: 48px; width: 60px; height: 10px; border: 2px solid #f87171; border-radius: 6px; }
    .ball {
      position: absolute;
      left: 20px;
      bottom: 18px;
      width: 22px;
      height: 22px;
      background: #f59e0b;
      border-radius: 50%;
      box-shadow: 0 0 0 2px rgba(0,0,0,.2) inset;
      transform-origin: center;
    }
    .swish { animation: swish 800ms ease-in forwards; }
    @keyframes swish {
      0% { transform: translate(0,0); }
      100% { transform: translate(285px, -85px); }
    }
    .clank { animation: clank 800ms ease-in forwards; }
    @keyframes clank {
      0% { transform: translate(0,0); }
      100% { transform: translate(250px, -65px); }
    }
    .miss { animation: miss 800ms ease-in forwards; }
    @keyframes miss {
      0% { transform: translate(0,0); }
      100% { transform: translate(230px, -40px); }
    }
    .base-wrap {
      display: grid;
      grid-template-columns: 1fr 280px;
      gap: 12px;
      align-items: start;
      position: relative;
    }
    .base-board { position: relative; }
    .base-grid {
      display: grid;
      grid-template-columns: repeat(var(--grid-size, 12), 1fr);
      gap: 6px;
      background: #0b1030;
      padding: 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.08);
      position: relative;
    }
    .tile {
      position: relative;
      aspect-ratio: 1 / 1;
      background: #0e1333;
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #aab2cf;
      font-size: 12px;
      cursor: pointer;
      overflow: hidden;
    }
    .tile.hq { background: #14205a; border-color: #60a5fa; }
    .tile.cannon { background: rgba(124,58,237,.14); border-color: #7c3aed; color: #c4b5fd; }
    .tile.collector { background: rgba(34,211,238,.12); border-color: #22d3ee; color: #99f6e4; }
    .tile.wall { background: rgba(148,163,184,.12); border-color: #94a3b8; color: #e5e7eb; }
    .tile.tesla { background: rgba(56,189,248,.12); border-color: #38bdf8; color: #bae6fd; }
    .tile.splash { background: rgba(34,197,94,.1); border-color: #22c55e; color: #bbf7d0; }
    .tile.slow { background: rgba(250,204,21,.12); border-color: #fbbf24; color: #fde68a; }
    .tile.range { outline: 2px dashed rgba(124,58,237,.6); }
    .tile .hp-bar {
      position: absolute;
      bottom: 4px;
      left: 6px;
      right: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,20,40,.8);
      border: 1px solid rgba(255,255,255,.1);
      overflow: hidden;
    }
    .tile .hp-bar .fill { height: 100%; background: var(--good); transition: width .2s ease, background .2s ease; }
    .tile .hp-bar.critical .fill { background: var(--bad); }
    .tile .hp-bar.warn .fill { background: var(--warn); }
    .build-panel {
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px;
      padding: 10px;
      background: #0b1030;
    }
    .build-btn { width: 100%; margin: 4px 0; }
    .alien {
      position: absolute;
      width: 60%;
      height: 60%;
      background: #f87171;
      border-radius: 6px;
      inset: 20%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #0b1030;
      font-weight: 700;
      text-transform: uppercase;
    }
    .alien.runner { background: #fbbf24; }
    .alien.brute { background: #fb7185; }
    .alien.shield { background: #93c5fd; }
    .path {
      position: absolute;
      inset: 3px;
      border: 2px dashed rgba(34,211,238,.45);
      border-radius: 6px;
    }
    .projectile-layer { position: absolute; inset: 10px; pointer-events: none; }
    .projectile {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(124,58,237,.85);
      transform: translate(-50%, -50%);
      transition: transform .25s ease, opacity .25s ease;
      opacity: 1;
    }
    .projectile.fade { opacity: 0; }
    .projectile.tesla { background: rgba(125,211,252,.9); }
    .projectile.splash { background: rgba(34,197,94,.85); }
    .tech { margin-top: 10px; border-top: 1px dashed rgba(255,255,255,.12); padding-top: 10px; }
    .tech .row { justify-content: space-between; }
    .tech .lock { color: var(--muted); }
    @media (max-width:1100px) {
      .view-content.two-column { grid-template-columns: 1fr; }
      .sidebar-slot { order: -1; }
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="brand">BizMan Revision <span class="dot">Arcade</span></div>
    <div class="row">
      <span class="chip">Unit 3 • AOS2</span>
      <span class="chip">Theme: Neon Night</span>
    </div>
  </header>

  <main id="app">
    <!-- Dashboard -->
    <section class="view active" id="view-dashboard" data-view="dashboard">
      <div class="view-content">
        <section class="panel card" id="dashboardPanel">
          <div class="subtitle">Pick topics, tweak options, and choose a mode.</div>
          <div class="controls" style="display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));margin-top:18px">
            <div>
              <h3>Topics</h3>
              <div id="topicList" class="topic-list"></div>
            </div>
            <div>
              <h3>Options</h3>
              <label>Number of Questions <input type="number" id="numQ" min="5" max="60" value="20"></label>
              <label>Timer per Question (seconds) <input type="number" id="timerPerQ" min="0" max="120" value="25"></label>
              <label><input type="checkbox" id="shuffle" checked> Shuffle questions</label>
              <label><input type="checkbox" id="instantReveal" checked> Instant answer reveal</label>
            </div>
          </div>
          <div style="margin-top:24px;display:flex;gap:12px;flex-wrap:wrap">
            <button class="btn primary" id="startBtn">Multiple Choice</button>
            <button class="btn secondary" id="shortBtn">Short Answer</button>
            <button class="btn secondary" id="shotBtn">Shot Clock (10s)</button>
            <button class="btn secondary" id="baseBtn">Base Defense</button>
            <button class="btn ghost" id="studyBtn">Study Deck</button>
          </div>
        </section>
      </div>
    </section>

    <!-- Mode views -->
    <section class="view" id="view-mcq" data-view="MCQ">
      <div class="view-content two-column">
        <section class="panel card shell-slot" data-shell-slot="game"></section>
        <div class="sidebar-slot" data-slot="hud"></div>
      </div>
    </section>

    <section class="view" id="view-short" data-view="SHORT">
      <div class="view-content two-column">
        <section class="panel card shell-slot" data-shell-slot="game"></section>
        <div class="sidebar-slot" data-slot="hud"></div>
      </div>
    </section>

    <section class="view" id="view-shot" data-view="SHOT">
      <div class="view-content two-column">
        <section class="panel card shell-slot" data-shell-slot="game"></section>
        <div class="sidebar-slot" data-slot="hud"></div>
      </div>
    </section>

    <section class="view" id="view-base" data-view="BASE">
      <div class="view-content two-column">
        <section class="panel card shell-slot" data-shell-slot="game"></section>
        <div class="sidebar-slot" data-slot="hud"></div>
      </div>
    </section>

    <!-- Study view -->
    <section class="view" id="view-study" data-view="STUDY">
      <div class="view-content">
        <section class="panel card study-panel">
          <h3>Study Deck</h3>
          <div id="studyDeck"></div>
          <div class="subtitle">Tip: collapse/expand explanations to quiz yourself.</div>
        </section>
      </div>
    </section>
  </main>

  <!-- Shared game shell -->
  <section class="panel card" id="gameShell" style="display:none">
    <div id="topicTags"></div>
    <div class="question" id="question"></div>

    <div class="answers" id="answers"></div>

    <!-- Short answer -->
    <div id="shortUI" class="hidden" style="display:grid;gap:10px;margin-top:18px">
      <input type="text" id="shortInput" placeholder="Type your answer...">
      <div class="row">
        <button class="btn primary small" id="checkShortBtn">Check</button>
        <button class="btn secondary small" id="revealShortBtn">Reveal</button>
      </div>
    </div>

    <!-- Shot Clock -->
    <div id="shotUI" class="hidden" style="display:grid;gap:10px;margin-top:18px">
      <div class="row">
        <span class="chip">Possession: <span id="possession">1</span>/<span id="maxPoss">5</span></span>
        <span class="chip">Points: <span id="playerPts">0</span></span>
        <span class="chip">Made: <span id="made">0</span></span>
        <span class="chip">Attempts: <span id="attempts">0</span></span>
        <span class="chip">Green: <span id="greenPct">0%</span></span>
        <span class="chip" id="announcer">Shot Clock: 10 seconds</span>
      </div>
      <div class="meter"><div class="fill" id="meterFill"></div></div>
      <div class="court">
        <div class="backboard"></div>
        <div class="hoop"></div>
        <div class="ball" id="ball"></div>
      </div>
      <div class="row">
        <button class="btn primary hidden" id="nextPossessionBtn">Next Possession</button>
        <button class="btn ghost hidden" id="finishShotGameBtn">Finish Game</button>
      </div>
    </div>

    <!-- Base Defense -->
    <div id="baseUI" class="hidden" style="display:grid;gap:14px;margin-top:18px">
      <div class="row">
        <span class="chip">Energy &#9889;: <span id="energy">0</span></span>
        <span class="chip">Cores &#9733;: <span id="cores">0</span></span>
        <span class="chip">Wave: <span id="wave">1</span></span>
        <span class="chip">Hearts &#10084;: <span id="hearts">3</span></span>
        <span class="chip" id="baseAnnouncer">Answer correctly to earn &#9889;. Build before aliens arrive!</span>
      </div>
      <div class="base-wrap">
        <div class="base-board">
          <div class="base-grid" id="baseGrid"></div>
          <div class="projectile-layer" id="projectileLayer"></div>
        </div>
        <div class="panel card hidden" id="baseGameOver" style="position:absolute;inset:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;z-index:12;background:rgba(10,11,20,.92)">
          <div style="font-size:22px;font-weight:900;color:#fff;margin-bottom:8px">Base Destroyed</div>
          <div class="subtitle" id="baseOverMsg">The aliens breached HQ.</div>
          <div class="row" style="margin-top:14px">
            <button class="btn primary" id="baseReplayBtn">Replay</button>
            <button class="btn ghost" id="baseExitBtn">Exit</button>
          </div>
        </div>
        <div class="build-panel">
          <div class="subtitle" style="margin-bottom:6px">Build / Upgrade</div>
          <button class="btn secondary build-btn" data-type="collector">Collector (&#9889;25)</button>
          <button class="btn secondary build-btn" data-type="cannon">Cannon (&#9889;40)</button>
          <button class="btn secondary build-btn" data-type="wall">Wall (&#9889;18)</button>
          <button class="btn secondary build-btn" data-type="tesla" data-locked>&#9889; Tesla (&#9733;1)</button>
          <button class="btn secondary build-btn" data-type="splash" data-locked>&#128165; Splash (&#9733;1)</button>
          <button class="btn secondary build-btn" data-type="slow" data-locked>&#129482; Slow Trap (&#9733;1)</button>
          <button class="btn ghost build-btn" id="upgradeBtn">Upgrade Selected</button>
          <div class="tech">
            <div class="row">
              <strong>Tech Tree</strong>
              <span class="lock" id="techMsg">Unlock advanced defenses with &#9733; cores from cleared waves.</span>
            </div>
            <div class="row">
              <button class="btn small secondary" id="unlockTesla">Unlock Tesla (&#9733;1)</button>
              <button class="btn small secondary" id="unlockSplash">Unlock Splash (&#9733;1)</button>
              <button class="btn small secondary" id="unlockSlow">Unlock Slow (&#9733;1)</button>
              <button class="btn small secondary" id="unlockRange">Unlock Range Boost (&#9733;1)</button>
              <button class="btn small secondary" id="unlockPower">Unlock Power Boost (&#9733;1)</button>
              <button class="btn small ghost" id="togglePaths">Toggle Paths</button>
            </div>
            <div class="row">
              <button class="btn small secondary" id="upgradeEnergy">Energy per Q +2 (&#9733;1)</button>
              <span class="subtitle">Increase energy earned for each correct answer.</span>
            </div>
          </div>
          <hr style="border-color:rgba(255,255,255,.08);margin:10px 0">
          <button class="btn primary build-btn" id="startWaveBtn">Start Alien Invasion</button>
          <button class="btn ghost build-btn" id="resetBaseBtn">Reset Base</button>
        </div
      </div>
      <div class="row">
        <div style="min-width:200px;width:40%">
          <div class="subtitle" style="margin-bottom:6px">HQ Integrity</div>
          <div class="meter"><div class="fill" id="hqHealthFill" style="width:100%"></div></div>
        </div>
      </div>
    </div>

    <div class="explain hidden" id="explain"></div>
    <div class="actions" id="actionRow">
      <button class="btn secondary" id="skipBtn">Skip</button>
      <button class="btn primary" id="nextBtn">Next</button>
    </div>
  </section>

  <!-- HUD -->
  <aside class="panel card hud" id="hud">
    <div class="row" style="justify-content:space-between;margin-bottom:10px">
      <div class="brand" style="font-size:18px">Stats</div>
      <div class="row stats">
        <div class="stat"><strong>Score</strong> <span id="score">0</span></div>
        <div class="stat"><strong>Streak</strong> <span id="streak">0</span></div>
        <div class="stat"><strong>Q</strong> <span id="qnum">0</span>/<span id="qtotal">0</span></div>
        <div class="stat"><strong>Time</strong> <span id="time">--</span></div>
      </div>
    </div>
    <div class="subtitle">Everything else is automatic – there’s no question upload/import anymore.</div>
  </aside>

  <div class="toast" id="toast"></div>

  <script type="module" src="js/main.js"></script>
</body>
</html>





